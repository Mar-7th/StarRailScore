# StarRailScore

崩坏：星穹铁道 _SRS_ 遗器评分标准。

[English](../README.md) | [中文](README_zh-CN.md)

该项目仍在开发中。

## 简介

_SRS_ 根据角色的典型定位判断遗器的有效词条数，根据不同词条的权重计算遗器分数。_SRS_ 提供理论最高分以计算归一化的最终得分。主词条和副词条各占 50% 的分数。

## 计算公式

### 主词条与副词条

主词条归一化得分通过等级与权重计算，0 级到 15 级分别对应基础值 1/16 到 16/16，权重通过查表得到，`main` 字段中为各个部位主词条的权重。例如：12 级的主词条权重为 0.9，归一化得分为 (12+1)/16 \* 0.9 = 0.61。

副词条归一化得分由各个词条的 count 次数和权重计算得到，`weight` 字段中为各个部位副词条的权重。

`maxV2` 字段记录了各部位的理论最高分（归一化分母）。不同部位的 `maxV2` 计算逻辑不同，以反映获取难度和游戏机制的差异：

1.  **头部 (HEAD) / 手部 (HAND)**:
    *   **获取难度**: 低（主词条固定）。
    *   **计算模型**: 假设为 4 词条初始胚子，共 9 个 counts (4 初始 + 5 强化)。
    *   **分布**: 极限分布 `(6, 1, 1, 1)`。

2.  **躯干 (BODY) / 脚部 (FOOT) / 位面球 (NECK) / 连结绳 (OBJECT)**:
    *   **获取难度**: 高（主词条随机）。
    *   **计算模型**: 假设为 3 词条初始胚子，共 8 个 counts (3 初始 + 4 强化 + 1 补词条)。
    *   **分布**: 极限分布 `(5, 1, 1, 1)`。
    *   **互斥**: 计算时会自动剔除该部位最优主词条对应的副词条（如暴击衣不能有暴击率副词条）。

例如：副词条 1 为 5 个 count、1 权重；副词条 2 为 2 个 count、0.8 权重；副词条 3 为 1 个 count、0.5 权重；副词条 4 为 1 个 count、0.3 权重，原始得分为 5 \* 1 + 2 \* 0.8 + 1 \* 0.5 + 1 \* 0.3 = 7.4。如果该部位的 `maxV2` 字段为 9.0，那么归一化得分为 7.4/9.0 = 0.82。

### 数据结构兼容性

`score.json` 文件包含两个 max 字段以保持向后兼容：

*   **`maxV2`** (对象): 使用新算法（基于获取难度的 count 调整）的各部位理论最高分。使用此字段可获得准确的按部位归一化。结构：`{"1": float, "2": float, "3": float, "4": float, "5": float, "6": float}`。
*   **`max`** (浮点数): 旧版字段，使用旧算法计算（所有部位均使用 6-count 分布，然后取平均值）。保留此字段以兼容旧版实现（期望单个 `max` 值）。

**建议**: 新实现应使用 `maxV2` 进行按部位评分，因为它提供了更准确的归一化，并更好地反映了不同部位获取完美遗器的实际难度。

### _SRS-N_

_SRS-N_ 使用相同的权重合并主词条和副词条的得分。按照上一节的示例，总得分为 0.61 \* 0.5 + 0.82 \* 0.5 = 0.72，可表示为 `0.72` `72%` `7.2/10`。

### _SRS-M_

_SRS-M_ 将 _SRS-N_ 的结果开平方根，该结果的特点是随着得分的提高，提升速度逐渐变慢。例如 _SRS-N_ 的结果为 0.72，那么 _SRS-M_ 的结果为 0.72^0.5 = 0.85，可表示为 `0.85` `85%` `8.5/10`。

